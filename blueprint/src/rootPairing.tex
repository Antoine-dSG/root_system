\chapter{Root pairing}
\label{cha:root-pairing}
\section{Basic definitions}
\label{sec:basic-definitions}

We follow the outline of mathlib's definitions. 

\begin{definition}
    \label{def:perfect-pairing}
    \leanok
    A {\it perfect pairing} is a quadruple $(R,M,N,\mathcal{L})$ where $R$ is a commutative ring, $M,N$ are 
    $R$-modules, and $\mathcal{L} : M \times N \to R$ is an $R$-bilinear map such that the induced maps
    \[
        \mathcal{L}_M : M \to {\rm Hom}_R(N,R), \quad m \mapsto \mathcal{L}(m,-),
    \]
    and 
    \[
        \mathcal{L}_N : N \to {\rm Hom}_R(M,R), \quad n \mapsto \mathcal{L}(-,n),
    \]
    are isomorphisms of $R$-modules.
\end{definition}

This leads to the very general notion of a root pairing.
\begin{definition}
    \label{def:root-pairing}
    \uses{def:perfect-pairing}
    \leanok
    A {\it root pairing} is a tuple $(R,M,N,\mathcal{L},I,\alpha, \alpha^\vee,s)$ with
       \begin{enumerate} 
        \item $(R,M,N,\mathcal{L})$ is a perfect pairing,
        \item  $I$ is a set (called the {\it index set}),
        \item $\alpha : I \to M, i \mapsto \alpha_i$ is an injective map on sets,
        \item $\alpha^\vee : I \to N, i \mapsto \alpha_i^\vee$ is an injective map on sets,
        \item $s : I \to {\rm Bij}(I,I)$, i.e. for each $i \in I$, $s_i \stackrel{\text{denotes}}{=}s(i)$ is a bijection on $I$,
       \end{enumerate}
       subject to the following conditions:\\
       I) For all $i \in I$, $\mathcal{L}(\alpha_i,\alpha^\vee_i) = 2$. \\
       II) For all $i,j \in I$, we have
            \begin{align*}
            \alpha_{s_i(j)} &= \alpha_j - \mathcal{L}(\alpha_j,\alpha^\vee_i)\alpha_i \\
            \alpha_{s_i(j)}^\vee &= \alpha_j^\vee - \mathcal{L}(\alpha_i,\alpha^\vee_j)\alpha_i^\vee
            \end{align*}
\end{definition}

Elements of $\Phi := {\rm Im}(\alpha)$ and $\Phi^\vee := {\rm Im}(\alpha^\vee)$ are called {\it roots} and {\it coroots}, 
respectively, of the root pairing $\mathcal{R}$. 

\begin{lemma}
    Given a root pairing $(R,M,N,\mathcal{L},I,\alpha, \alpha^\vee, s)$, the map $s$ is unique. 
    That is, given $t : I \to {\rm Bij}(I,I)$, the tuple $(R,M,N,\mathcal{L},I,\alpha, \alpha^\vee, t)$
    is a root pairing if and only if $t = s$.
\end{lemma}
\begin{proof}
    Assume to the contrary that $(R,M,N,\mathcal{L},I,\alpha, \alpha^\vee, t)$ is a root pairing, and that 
    there exists $i \in I$ such that $t_i \neq s_i$. In other words, there exists $j \in I$ such that
    $t_i(j) \neq s_i(j)$. By the condition (II), we then have
    \[
        \alpha_{t_i(j)} = \alpha_j - \mathcal{L}(\alpha_j,\alpha^\vee_i)\alpha_i = \alpha_{s_i(j)},
    \]
    which contradicts the assumption that the map $\alpha$ is injective.
\end{proof}
If $\mathcal{R} := (R,M,N,\mathcal{L},I,\alpha, \alpha^\vee,s)$ is 
a root pairing then $\mathcal{R}^\vee := (R,N,M,\mathcal{L}^\vee,I,\alpha^\vee, \alpha,s)$ is again 
a root pairing, where $\mathcal{L}^\vee (n,m) := \mathcal{L}(m,n)$ for all $n \in N,m \in M$. The 
latter is called the {\it dual} of $\mathcal{R}$.

Let us fix a root pairing $\mathcal{R} = (R,M,N,\mathcal{L},I,\alpha, \alpha^\vee,s)$. Consider $\sigma: I \to {\rm End}_R(M)$ and 
$\sigma^\vee : I \to {\rm End}_R(N)$ defined by
\[
    \sigma_i(m) = m - \mathcal{L}(m,\alpha^\vee_i)\alpha_i, \quad \sigma^\vee_i(n) = n - \mathcal{L}(\alpha_i,n)\alpha^\vee_i, \quad m \in M, n \in N.
\]
Then $\sigma_i$ and $\sigma^\vee_i$ are $R$-module homomorphisms. Moreover, 
for each $i \in I$, $\sigma_i^2 = {\rm Id}_M$ and $\sigma_i^\vee = {\rm Id}_N$. By Condition (II), 
\[
    \sigma_i(\alpha_j) = \alpha_{s_i(j)}, \quad \sigma^\vee_i(\alpha^\vee_j) = \alpha^\vee_{s_i(j)},
\]
and in particular that $\sigma_i(\Phi) \subset \Phi$ and 
$\sigma_i^\vee(\Phi^\vee) \subset \Phi^\vee$ for all $i \in I$.

\begin{definition}
    The {\it Weyl group} of $\mathcal{R}$, denoted $W(\mathcal{R})$, is the subgroup of ${\rm Aut}(I)$, the set of 
    permutations of $I$, generated by $\{s_i : i \in I\}$. 
\end{definition}
\begin{lemma}
    Let $i,j,k \in I$ such that $s_i(j) = k$. Then $s_k = s_is_js_i$. In particular, for 
    $w \in W(\mathcal{R})$ and $w(i) = j$, we have $s_j = ws_iw^{-1}$. 
\end{lemma}
\begin{proof}

\end{proof}

The maps $s_i \mapsto \sigma_i, i \in I$ and $s_i \mapsto \sigma_i^\vee, i \in I$ extend uniquely
to injective group homomorphisms $W(\mathcal{R}) \to {\rm End}_R(M)$ and $W(\mathcal{R}) \to {\rm End}_R(N)$
respectively. 

\begin{lemma}
    For any $i,j \in I$ and any $w \in W(\mathcal{R})$, we have 
    \[
        \mathcal{L}(\alpha_{w(i)},\alpha^\vee_{w(j)}) = \mathcal{L}(\alpha_{i},\alpha_j^\vee).
    \]
\end{lemma}
\begin{proof}
    It suffices to prove the claim for $w = s_k$, for some $k \in I$. In this case, 
    \begin{align*}
        \mathcal{L}(\alpha_{s_k(i)},\alpha^\vee_{s_k(j)}) &=  \mathcal{L}(\sigma_k(\alpha_{i}),\sigma_k^\vee(\alpha^\vee_{j}))\\
                                &= \mathcal{L}(\alpha_{i} - \mathcal{L}(\alpha_i,\alpha_k^\vee)\alpha_k,\alpha^\vee_{j} - \mathcal{L}(\alpha_k,\alpha_j^\vee) \alpha_k^\vee)\\
                            & \mathcal{L}(\alpha_{i},\alpha^\vee_{j}).
    \end{align*}
\end{proof}




Remaining concepts to be added:
\begin{enumerate}
    \item Values of the root pairing and crystallographic root pairings
    \item Coxeter weights
    \item Orthogonal roots 
    \item Irreducible root pairings
    \item Reduced root pairings
\end{enumerate}